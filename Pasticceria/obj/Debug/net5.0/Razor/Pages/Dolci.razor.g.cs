#pragma checksum "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ff8a142b13415de7da70ae7b7a13c8d10cc1ad68"
// <auto-generated/>
#pragma warning disable 1591
namespace Pasticceria.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Pasticceria;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Pasticceria.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\_Imports.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/dolci")]
    public partial class Dolci : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Pasticceria.Pages.Components.TitlePage>(0);
            __builder.AddAttribute(1, "Title", "Dolci");
            __builder.CloseComponent();
#nullable restore
#line 10 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
 if (dolci != null)
{

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<Radzen.Blazor.RadzenDataGrid<Data.Entity.Dolce>>(2);
            __builder.AddAttribute(3, "AllowFiltering", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                       true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(4, "AllowPaging", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                          true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(5, "PageSize", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                          10

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(6, "AllowSorting", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                            true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(7, "RowRender", new System.Action<Radzen.RowRenderEventArgs<Data.Entity.Dolce>>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                              RowRender

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(8, "ExpandMode", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Radzen.DataGridExpandMode>(
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                                                     DataGridExpandMode.Single

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(9, "Data", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.IEnumerable<Data.Entity.Dolce>>(
#nullable restore
#line 13 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                           dolci

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(10, "Columns", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(11);
                __builder2.AddAttribute(12, "Width", "50px");
                __builder2.AddAttribute(13, "Property", "ID");
                __builder2.AddAttribute(14, "TextAlign", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Radzen.TextAlign>(
#nullable restore
#line 29 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                  TextAlign.Center

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(15, "Filterable", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 29 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                                false

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(16, "Sortable", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 29 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                                                 false

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(17, "Template", (Microsoft.AspNetCore.Components.RenderFragment<Data.Entity.Dolce>)((Data) => (__builder3) => {
                    __builder3.OpenElement(18, "i");
                    __builder3.AddAttribute(19, "title", "Modifica");
                    __builder3.AddAttribute(20, "style", "color: navy; cursor: pointer");
                    __builder3.AddAttribute(21, "class", "oi oi-pencil");
                    __builder3.AddAttribute(22, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 31 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                              () => editDolce(@Data)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(23, "\r\n                    &nbsp;&nbsp;\r\n                    ");
                    __builder3.OpenElement(24, "i");
                    __builder3.AddAttribute(25, "class", "oi oi-trash");
                    __builder3.AddAttribute(26, "title", "Elimina");
                    __builder3.AddAttribute(27, "style", "color:navy; cursor:pointer");
                    __builder3.AddAttribute(28, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 33 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                          () => delDolce(@Data)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.CloseElement();
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(29, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(30);
                __builder2.AddAttribute(31, "Width", "40px");
                __builder2.AddAttribute(32, "Property", "ID");
                __builder2.AddAttribute(33, "Title", "ID");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(34, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(35);
                __builder2.AddAttribute(36, "Width", "200px");
                __builder2.AddAttribute(37, "Property", "Nome");
                __builder2.AddAttribute(38, "Title", "Nome");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(39, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(40);
                __builder2.AddAttribute(41, "Width", "200px");
                __builder2.AddAttribute(42, "Property", "DataVendita");
                __builder2.AddAttribute(43, "Title", "Data vendita");
                __builder2.AddAttribute(44, "FormatString", "{0:d}");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(45, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(46);
                __builder2.AddAttribute(47, "Width", "50px");
                __builder2.AddAttribute(48, "Property", "Qta");
                __builder2.AddAttribute(49, "Title", "Quantita");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(50, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenDataGridColumn<Data.Entity.Dolce>>(51);
                __builder2.AddAttribute(52, "Width", "50px");
                __builder2.AddAttribute(53, "Property", "Prezzo");
                __builder2.AddAttribute(54, "Title", "Prezzo");
                __builder2.AddAttribute(55, "Template", (Microsoft.AspNetCore.Components.RenderFragment<Data.Entity.Dolce>)((prezzo) => (__builder3) => {
                    __builder3.AddContent(56, 
#nullable restore
#line 42 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                     String.Format(new System.Globalization.CultureInfo("it-IT"), "{0:C}", prezzo.Prezzo)

#line default
#line hidden
#nullable disable
                    );
                }
                ));
                __builder2.CloseComponent();
            }
            ));
            __builder.AddComponentReferenceCapture(57, (__value) => {
#nullable restore
#line 12 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                          myGridDolci = (Radzen.Blazor.RadzenDataGrid<Data.Entity.Dolce>)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(58, "\r\n    ");
            __builder.AddMarkupContent(59, "<div class=\"row form-group\"><div class=\"col-12\">\r\n            &nbsp;\r\n        </div></div>\r\n    ");
            __builder.OpenElement(60, "div");
            __builder.AddAttribute(61, "class", "row form-group");
            __builder.OpenElement(62, "div");
            __builder.AddAttribute(63, "class", "col-3");
            __builder.OpenComponent<Radzen.Blazor.RadzenButton>(64);
            __builder.AddAttribute(65, "ButtonType", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Radzen.ButtonType>(
#nullable restore
#line 53 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                   ButtonType.Button

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(66, "Icon", "add_circle");
            __builder.AddAttribute(67, "ButtonStyle", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Radzen.ButtonStyle>(
#nullable restore
#line 53 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                     ButtonStyle.Secondary

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(68, "Text", "AGGIUNGI");
            __builder.AddAttribute(69, "Click", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 53 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                                                                     () => addDolce()

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(70, "\r\n        ");
            __builder.OpenElement(71, "div");
            __builder.AddAttribute(72, "class", "col-9 text-right");
            __builder.AddMarkupContent(73, "\r\n            Dolci presenti in archivio ");
            __builder.OpenElement(74, "b");
            __builder.AddAttribute(75, "style", "color:navy");
            __builder.AddContent(76, 
#nullable restore
#line 55 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                              dolci.Count()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddContent(77, " di cui in vetrina ");
            __builder.OpenElement(78, "b");
            __builder.AddAttribute(79, "style", "color:navy");
            __builder.AddContent(80, 
#nullable restore
#line 55 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
                                                                                                                         dolci.Where(x => x.IsVetrina == true && x.DataVendita >= DateTime.Now.Date.AddDays(-2) && x.DataVendita <= DateTime.Now.Date).Count()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 58 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
}
else
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(81, "<div class=\"d-flex align-items-center\"><strong>Loading...</strong>\r\n        <div class=\"spinner-border ml-auto\" role=\"status\" aria-hidden=\"true\"></div></div>");
#nullable restore
#line 65 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 67 "D:\Progetti\Pasticceria\Pasticceria\Pages\Dolci.razor"
       
        string baseUrl;
        IEnumerable<Data.Entity.Dolce> dolci;
        RadzenDataGrid<Data.Entity.Dolce> myGridDolci;

    protected override async Task OnInitializedAsync()
    {
        baseUrl = myAppSettings.GetBaseUrl();
        dolci = await myCustomHttpClient.GetJsonAsync<Data.Entity.Dolce[]>(baseUrl + "/api/dolci/get");
    }

    void RowRender(RowRenderEventArgs<Data.Entity.Dolce> args)
    {
        args.Expandable = true;
    }

    protected override void OnAfterRender(bool firstRender)
    {
        //if (firstRender)
        //{
        //    grid.ExpandRow(dolci.FirstOrDefault());
        //    StateHasChanged();
        //}

        //base.OnAfterRender(firstRender);
    }

    async Task delDolce(Data.Entity.Dolce myDolce)
    {
        var confirmResult = await myDialogService.Confirm("Verranno cancellati il dolce e tutti gli ingredienti associati. Confermi ?", "Attenzione", new ConfirmOptions() { OkButtonText = "SI", CancelButtonText = "NO" });
        if (confirmResult.HasValue && confirmResult.Value)
        {
            HttpResponseMessage message = await myCustomHttpClient.DeleteAsync(baseUrl + "/api/ingredienti/deletebydolce/" + myDolce.ID);
            if (message.IsSuccessStatusCode)
            {
                message = await myCustomHttpClient.DeleteAsync(baseUrl + "/api/dolci/delete/" + myDolce.ID);
                if (message.IsSuccessStatusCode)
                    dolci = await myCustomHttpClient.GetJsonAsync<Data.Entity.Dolce[]>(baseUrl + "/api/dolci/get");
            }
        }
    }

    async Task addDolce()
    {
        await myDialogService.OpenAsync<DolciDetail>("Inserimento nuovo dolce",
                new Dictionary<string, object>() { { "IDDolce", 0 } },
                new DialogOptions() { Width = "900px", Height = "700px", Resizable = true, Draggable = true });

        dolci = await myCustomHttpClient.GetJsonAsync<Data.Entity.Dolce[]>(baseUrl + "/api/dolci/get");
    }

    async Task editDolce(Data.Entity.Dolce myDolce)
    {
        await myDialogService.OpenAsync<DolciDetail>("Modifica dolce",
                new Dictionary<string, object>() { { "IDDolce", myDolce.ID } },
                new DialogOptions() { Width = "900px", Height = "700px", Resizable = true, Draggable = true });

        dolci = await myCustomHttpClient.GetJsonAsync<Data.Entity.Dolce[]>(baseUrl + "/api/dolci/get");
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NotificationService myNotificationService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Radzen.DialogService myDialogService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Data.Service.AppSettings myAppSettings { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Data.Service.CustomHttpClient myCustomHttpClient { get; set; }
    }
}
#pragma warning restore 1591
